(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{195:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return l})),r.d(t,"metadata",(function(){return o})),r.d(t,"toc",(function(){return u})),r.d(t,"default",(function(){return p}));var n=r(4),a=r(10),s=(r(0),r(734)),c=r(738),i=r(739),l={id:"grpc-auth-labs",title:"grpc Auth Labs",description:"How to set up grpc authentication server"},o={unversionedId:"grpc-auth-labs",id:"grpc-auth-labs",isDocsHomePage:!1,title:"grpc Auth Labs",description:"How to set up grpc authentication server",source:"@site/../docs/grpc-auth-labs.md",slug:"/grpc-auth-labs",permalink:"/docs/next/grpc-auth-labs",editUrl:"https://github.com/vulnsystem/www.gitcoins.io/blob/documentation/website/../docs/grpc-auth-labs.md",version:"current",lastUpdatedAt:1622334697,formattedLastUpdatedAt:"5/30/2021",sidebar:"docs",previous:{title:"Mutual Authentication",permalink:"/docs/next/mutual-authentication"},next:{title:"Introduction",permalink:"/docs/next/getting-started"}},u=[{value:"Generate CA and server certificates",id:"generate-ca-and-server-certificates",children:[]},{value:"Implement server-side TLS",id:"implement-server-side-tls",children:[]},{value:"Start client connection",id:"start-client-connection",children:[]},{value:"Subject Alternative Name (SAN)",id:"subject-alternative-name-san",children:[]},{value:"Implement mutual TLS",id:"implement-mutual-tls",children:[]},{value:"Private key passphrase",id:"private-key-passphrase",children:[]}],b={toc:u};function p(e){var t=e.components,l=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(n.a)({},b,l,{components:t,mdxType:"MDXLayout"}),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Copyright: the following content is adapt from the ",Object(s.b)("a",{parentName:"p",href:"https://dev.to/techschoolguru/how-to-secure-grpc-connection-with-ssl-tls-in-go-4ph"},"TECHSCHOOL"),".")),Object(s.b)("p",null,"In the previous lecture, we have learned how ",Object(s.b)("a",{parentName:"p",href:"mutual-authentication"},"mutual authentication works"),"."),Object(s.b)("p",null,"Today we will learn how to secure the ",Object(s.b)("a",{parentName:"p",href:"https://grpc.io/docs/guides/auth/#nodejs"},"gRPC connection using TLS"),"."),Object(s.b)("p",null,Object(s.b)("img",{alt:"grpc",src:r(884).default})),Object(s.b)("p",null,"If you haven\u2019t read my post about SSL/TLS. I highly recommend you to read it first to have a deep understanding about TLS before continue."),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",{parentName:"li",href:"ssl-tls-overview"},"Overview of SSL/TLS")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",{parentName:"li",href:"symmetric-cryptography"},"Symmetric Cryptography")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",{parentName:"li",href:"asymmetric-cryptography"},"Asymmetric Cryptography")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("a",{parentName:"li",href:"tls-handshake"},"TLS Handshake"))),Object(s.b)("p",null,"Here's the link to the full gRPC course playlist on Youtube\nGithub repository: pcbook-go and pcbook-java\nGitlab repository: pcbook-go and pcbook-java\nTypes of gRPC connections"),Object(s.b)("p",null,"There are 3 types of gRPC connections:"),Object(s.b)("p",null,Object(s.b)("img",{alt:"grpc-connection-types",src:r(885).default})),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"The first one is insecure connection, which we\u2019ve been using since the beginning of this course. In this connection, all data transfered between client and server is not encrypted. So please don\u2019t use it in production!"),Object(s.b)("li",{parentName:"ul"},"The second type is connection secured by server-side TLS. In this case, all the data is encrypted, but only the server needs to provide its TLS certificate to the client. You can use this type of connection if the server doesn\u2019t care which client is calling its API."),Object(s.b)("li",{parentName:"ul"},"The third and strongest type is connection secured by mutual TLS. We use it when the server also needs to verify who\u2019s calling its services. So in this case, both client and server must provide their TLS certificates to the other.")),Object(s.b)("p",null,"In this article, we will learn to implement both server-side and mutual TLS in node. So let\u2019s get started!\nGenerate TLS certificates."),Object(s.b)("h2",{id:"generate-ca-and-server-certificates"},"Generate CA and server certificates"),Object(s.b)("p",null,"First we write the ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-server-auth/credentials/gen.sh"},"gen.sh")," script to generate TLS certificates."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},'# 1. Generate server CA\'s private key and self-signed certificate\nopenssl req -x509 -newkey rsa:4096 -days 365 -nodes -keyout ca.key -out ca.cert -subj "/CN=localhost/emailAddress=ca@gmail.com"\n\necho "CA\'s self-signed certificate"\nopenssl x509 -in ca.cert -noout -text\n\n# 2. Generate web server\'s private key and certificate signing request (CSR)\nopenssl req -newkey rsa:4096 -nodes -keyout server.key -out server.req -subj "/CN=localhost/emailAddress=server@gmail.com"\n\n# 3. Use CA\'s private key to sign web server\'s CSR and get back the signed certificate\nopenssl x509 -req -in server.req -days 60 -CA ca.cert -CAkey ca.key -CAcreateserial -out server.cert -extfile server-ext.cnf\n\necho "Server\'s signed certificate"\nopenssl x509 -in server.cert -noout -text\n\n# 4. To verify the server certificate aginst by root CA\necho "server\'s certificate verification"\nopenssl verify -show_chain -CAfile ca.cert server.cert\n')),Object(s.b)("p",null,"I encourage you to read my post about ",Object(s.b)("a",{parentName:"p",href:"create-certificates"},"how to create and sign TLS certificate")," to understand how this script works."),Object(s.b)("p",null,"Basically this script contains 3 parts:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"First, generate CA\u2019s private key and its self-signed certificate."),Object(s.b)("li",{parentName:"ul"},"Second, create web server\u2019s private key and CSR."),Object(s.b)("li",{parentName:"ul"},"And third, use CA\u2019s private key to sign the web server\u2019s CSR and get back its certificate.")),Object(s.b)("p",null,"The generated files that we care about in this lab are:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"The CA\u2019s certificate,"),Object(s.b)("li",{parentName:"ul"},"The CA\u2019s private key,"),Object(s.b)("li",{parentName:"ul"},"The server\u2019s certificate,"),Object(s.b)("li",{parentName:"ul"},"And the server\u2019s private key.")),Object(s.b)("h2",{id:"implement-server-side-tls"},"Implement server-side TLS"),Object(s.b)("p",null,"Next step, I will show you how to secure our gRPC connection with server-side TLS."),Object(s.b)("p",null,"Let\u2019s open ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-server-auth/greeter_server.js"},"greeter_server.js")," file. I will add ca and server certificates and sever private key to create TLS credentials."),Object(s.b)(c.a,{groupId:"one-way-server",defaultValue:"insecure",values:[{label:"Insecure",value:"insecure"},{label:"server-auth",value:"server-auth"}],mdxType:"Tabs"},Object(s.b)(i.a,{value:"insecure",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"function main() {\n  var server = new grpc.Server();\n  server.addService(hello_proto.Greeter.service, {sayHello: sayHello});\n  server.bindAsync('0.0.0.0:50051', grpc.ServerCredentials.createInsecure(), () => {\n    server.start();\n  });\n}\n"))),Object(s.b)(i.a,{value:"server-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"function main() {\n  var server = new grpc.Server();\n\n  server.addService(hello_proto.Greeter.service, {sayHello: sayHello});\n  server.bindAsync('0.0.0.0:50051', grpc.ServerCredentials.createSsl(\n    fs.readFileSync('./credentials/ca.cert'),\n    [{\n        cert_chain: fs.readFileSync('./credentials/server.cert'),\n        private_key: fs.readFileSync('./credentials/server.key')\n    }],\n    false\n  ), () => {\n    server.start();\n  });\n}\n")))),Object(s.b)("p",null,"Now we can start the server:"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"npm install\nnode greeter_server.js\n")),Object(s.b)("h2",{id:"start-client-connection"},"Start client connection"),Object(s.b)("p",null,"After the server started, the client will try to connect with insecure function. But it failed because we haven\u2019t enabled TLS on the client side yet. So let\u2019s do that!"),Object(s.b)("p",null,"Similar to what we did on the server, I also add a function to load TLS credentials from files. But this time, we only need to load the certificate of the CA who signed the server\u2019s certificate."),Object(s.b)("p",null,"The reason is, client needs to make sure that it\u2019s the right server it wants to talk to. So server's cert will be verified against the CA's cert and the CA should be trusted by client."),Object(s.b)("p",null,"Let\u2019s open ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-server-auth/greeter_client.js"},"greeter_client.js")," file and add the trusted ca certificates to client."),Object(s.b)(c.a,{groupId:"one-way-client",defaultValue:"insecure",values:[{label:"Insecure",value:"insecure"},{label:"server-auth",value:"server-auth"}],mdxType:"Tabs"},Object(s.b)(i.a,{value:"insecure",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"var client = new hello_proto.Greeter(target,\n            grpc.credentials.createInsecure());\n"))),Object(s.b)(i.a,{value:"server-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"var client = new hello_proto.Greeter(target,\n            grpc.credentials.createSsl(fs.readFileSync('./credentials/ca.cert')));\n")))),Object(s.b)("p",null,"So here we load the ca.cert file. Note that we only need to set the RootCAs field, which contains the trusted CA\u2019s certificate."),Object(s.b)("p",null,"And we\u2019re done. Let\u2019s try it out!"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},"node greeter_client.js\n")),Object(s.b)("p",null,"This time the requests are successfully sent to the server. Perfect!"),Object(s.b)("center",null,Object(s.b)("img",{src:"/docs/assets/GettingStartedCongratulations.png",width:"150"})),Object(s.b)("h2",{id:"subject-alternative-name-san"},"Subject Alternative Name (SAN)"),Object(s.b)("p",null,"There\u2019s 1 thing I want to show you here. Remember that when we develop on localhost, It\u2019s important to add the IP:0.0.0.0 as an Subject Alternative Name (SAN) extension to the certificate."),Object(s.b)(c.a,{groupId:"san",defaultValue:"wIP",values:[{label:"With IP",value:"wIP"},{label:"Without IP",value:"wzIP"}],mdxType:"Tabs"},Object(s.b)(i.a,{value:"xIP",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"subjectAltName=DNS:*.pcbook.com,DNS:*.pcbook.org,IP:0.0.0.0\n"))),Object(s.b)(i.a,{value:"wzIP",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"subjectAltName=DNS:*.pcbook.com,DNS:*.pcbook.org\n")))),Object(s.b)("p",null,"Let\u2019s see what will happen if we remove this from the server.ext config file."),Object(s.b)("p",null,"Then regenerate the certificates, restart the server, and run the client again."),Object(s.b)("p",null,"As you can see, there\u2019s an error saying that the TLS handshake failed because it cannot validate the certificate for 0.0.0.0, since the SAN doesn\u2019t contain this IP address."),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"(node:9199) ","[DEP0123]"," DeprecationWarning: Setting the TLS ServerName to an IP address is not permitted by RFC 6066. This will be ignored in a future version.")),Object(s.b)("p",null,"On production, it will be OK because we use domain names instead."),Object(s.b)("p",null,"Alright, so now you know how to enable server-side TLS for your gRPC connection. Let\u2019s learn how to enable mutual TLS!"),Object(s.b)("h2",{id:"implement-mutual-tls"},"Implement mutual TLS"),Object(s.b)("p",null,"At the moment, the server has already shared its certificate with the client. For mutual TLS, the client also has to share its certificate with the server. So now let\u2019s update this ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-client-auth/gen.sh"},"gen.sh")," script to create and sign a certificate for the client."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},'# 4. Generate client\'s private key and certificate signing request (CSR)\nopenssl req -newkey rsa:4096 -nodes -keyout client.key -out client.req -subj "/CN=localhost/emailAddress=client@gmail.com"\n\n# 5. Use CA\'s private key to sign web server\'s CSR and get back the signed certificate\nopenssl x509 -req -in client.req -days 60 -CA ca.cert -CAkey ca.key -CAcreateserial -out client.cert\n\necho "Client and Server\'s signed certificate"\nopenssl x509 -in server.cert -noout -text\nopenssl x509 -in client.cert -noout -text\n\n# 6. To verify the server certificate aginst by root CA\necho "Client and server\'s certificate verification"\nopenssl verify -show_chain -CAfile ca.cert server.cert\nopenssl verify -show_chain -CAfile ca.cert client.cert\n')),Object(s.b)("p",null,"Let\u2019s say for this tutorial, we use the same CA to sign both server and client\u2019s certificates. In the real world, we might have multiple clients with different certificates signed by different CAs."),Object(s.b)("p",null,"After the client\u2019s certificate and private key are ready. To enable mutual TLS, on the server side ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-client-auth/greeter_server.js"},"greeter_server.js"),", we should change the ClientAuth field from False to True."),Object(s.b)(c.a,{groupId:"two-way-auth",defaultValue:"mutual-auth",values:[{label:"mutual-auth",value:"mutual-auth"},{label:"server-auth",value:"server-auth"}],mdxType:"Tabs"},Object(s.b)(i.a,{value:"mutual-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"function main() {\n  var server = new grpc.Server();\n\n  server.addService(hello_proto.Greeter.service, {sayHello: sayHello});\n  server.bindAsync('0.0.0.0:50051', grpc.ServerCredentials.createSsl(\n    fs.readFileSync('./credentials/ca.cert'),\n    [{\n        cert_chain: fs.readFileSync('./credentials/server.cert'),\n        private_key: fs.readFileSync('./credentials/server.key')\n    }],\n    true\n  ), () => {\n    server.start();\n  });\n}\n"))),Object(s.b)(i.a,{value:"server-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"function main() {\n  var server = new grpc.Server();\n\n  server.addService(hello_proto.Greeter.service, {sayHello: sayHello});\n  server.bindAsync('0.0.0.0:50051', grpc.ServerCredentials.createSsl(\n    fs.readFileSync('./credentials/ca.cert'),\n    [{\n        cert_chain: fs.readFileSync('./credentials/server.cert'),\n        private_key: fs.readFileSync('./credentials/server.key')\n    }],\n    false\n  ), () => {\n    server.start();\n  });\n}\n")))),Object(s.b)("p",null,"And we\u2019re done with the server. Let\u2019s run it in the terminal."),Object(s.b)("p",null,"Now if we connect the current client to this new server, it will fail because the server now also requires client to send its certificate."),Object(s.b)("p",null,"Let\u2019s go to the client code ",Object(s.b)("a",{parentName:"p",href:"https://github.com/vulnsystem/OpenssLabs/blob/main/grpc-client-auth/greeter_client.js"},"greeter_client.js")," to fix this. I will just copy the code to load certificate on the server side and change the file names to client.cert and client.key.Then we have to add the client certificate to the TLS config by setting the Certificates field, just like what we did on the server side."),Object(s.b)(c.a,{groupId:"two-way-client",defaultValue:"mutual-auth",values:[{label:"mutual-auth",value:"mutual-auth"},{label:"server-auth",value:"server-auth"}],mdxType:"Tabs"},Object(s.b)(i.a,{value:"mutual-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"var client = new hello_proto.Greeter(target,\n                grpc.credentials.createSsl(fs.readFileSync('./credentials/ca.cert'),\n                                        fs.readFileSync('./credentials/client.key'),\n                                        fs.readFileSync('./credentials/client.cert')));\n"))),Object(s.b)(i.a,{value:"server-auth",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre"},"var client = new hello_proto.Greeter(target,\n                grpc.credentials.createSsl(fs.readFileSync('./credentials/ca.cert')));\n")))),Object(s.b)("p",null,"OK, now if we re-run the client, all the requests will be successful."),Object(s.b)("center",null,Object(s.b)("img",{src:"/docs/assets/GettingStartedCongratulations.png",width:"150"})),Object(s.b)("h2",{id:"private-key-passphrase"},"Private key passphrase"),Object(s.b)("p",null,"One last thing before we finish. As you know, the current client\u2019s and server\u2019s private key that we are using are not encrypted. It\u2019s because we use the -nodes option when generating them (in the cert/gen.sh file)."),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-shell"},'openssl req -newkey rsa:4096 -nodes -keyout server-key.pem -out server-req.pem -subj "/C=FR/ST=Ile de France/L=Paris/O=PC Book/OU=Computer/CN=*.pcbook.com/emailAddress=pcbook@gmail.com"\n')),Object(s.b)("p",null,"If we remove this -nodes option and run make cert, we will be asked to provide a passphrase to encrypt the server\u2019s private key: ",Object(s.b)("strong",{parentName:"p"},"passphrase"),"."),Object(s.b)("p",null,"And the generated private key of the server is now encrypted. If we try to start the server with this key, it will return an ",Object(s.b)("strong",{parentName:"p"},"error"),": cannot load TLS credentials. That\u2019s because the key is encrypted."),Object(s.b)("p",null,"We can add more codes to decrypt the key with the passphrase, but I think in the end, we still have to protect the passphrase by keeping it somewhere safe. So we can always store our unencrypted private key in that place as well."),Object(s.b)("p",null,"For example, if you use amazon web service, you can store your private key or any other secrets in encrypted format with aws secret manager. Or you can use HashiCorp\u2019s Vault for the same purpose."),Object(s.b)("p",null,"And that\u2019s everything I wanted to share with you in this article. I hope you find it useful. Thanks a lot for reading, and see you guys in the next one!"))}p.isMDXComponent=!0},734:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return h}));var n=r(0),a=r.n(n);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=a.a.createContext({}),u=function(e){var t=a.a.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},b=function(e){var t=u(e.components);return a.a.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,s=e.originalType,c=e.parentName,o=l(e,["components","mdxType","originalType","parentName"]),b=u(r),d=n,h=b["".concat(c,".").concat(d)]||b[d]||p[d]||s;return r?a.a.createElement(h,i(i({ref:t},o),{},{components:r})):a.a.createElement(h,i({ref:t},o))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=r.length,c=new Array(s);c[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,c[1]=i;for(var o=2;o<s;o++)c[o]=r[o];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},735:function(e,t,r){"use strict";function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}},736:function(e,t,r){"use strict";var n=r(0),a=r(737);t.a=function(){var e=Object(n.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},737:function(e,t,r){"use strict";var n=r(0),a=Object(n.createContext)(void 0);t.a=a},738:function(e,t,r){"use strict";var n=r(0),a=r.n(n),s=r(736),c=r(735),i=r(69),l=r.n(i);var o=37,u=39;t.a=function(e){var t=e.lazy,r=e.block,i=e.defaultValue,b=e.values,p=e.groupId,d=e.className,h=Object(s.a)(),v=h.tabGroupChoices,m=h.setTabGroupChoices,f=Object(n.useState)(i),y=f[0],g=f[1],O=n.Children.toArray(e.children),j=[];if(null!=p){var w=v[p];null!=w&&w!==y&&b.some((function(e){return e.value===w}))&&g(w)}var S=function(e){var t=e.target,r=j.indexOf(t),n=O[r].props.value;g(n),null!=p&&(m(p,n),setTimeout((function(){var e,r,n,a,s,c,i,o;(e=t.getBoundingClientRect(),r=e.top,n=e.left,a=e.bottom,s=e.right,c=window,i=c.innerHeight,o=c.innerWidth,r>=0&&s<=o&&a<=i&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l.a.tabItemActive),setTimeout((function(){return t.classList.remove(l.a.tabItemActive)}),2e3))}),150))},k=function(e){var t,r;switch(e.keyCode){case u:var n=j.indexOf(e.target)+1;r=j[n]||j[0];break;case o:var a=j.indexOf(e.target)-1;r=j[a]||j[j.length-1]}null===(t=r)||void 0===t||t.focus()};return a.a.createElement("div",{className:"tabs-container"},a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":r},d)},b.map((function(e){var t=e.value,r=e.label;return a.a.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:Object(c.a)("tabs__item",l.a.tabItem,{"tabs__item--active":y===t}),key:t,ref:function(e){return j.push(e)},onKeyDown:k,onFocus:S,onClick:S},r)}))),t?Object(n.cloneElement)(O.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):a.a.createElement("div",{className:"margin-vert--md"},O.map((function(e,t){return Object(n.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},739:function(e,t,r){"use strict";var n=r(0),a=r.n(n);t.a=function(e){var t=e.children,r=e.hidden,n=e.className;return a.a.createElement("div",{role:"tabpanel",hidden:r,className:n},t)}},884:function(e,t,r){"use strict";r.r(t),t.default=r.p+"assets/images/grpc-2b88fa6714071d12c164ea4cb2a00d14.svg"},885:function(e,t,r){"use strict";r.r(t),t.default=r.p+"assets/images/grpc-connection-types-08b1b5c28f3316e3e5b06e61a89bba26.png"}}]);